FROM mhart/alpine-node:14.16.1
RUN mkdir -p /var/www/q2a.js/node_modules
WORKDIR /var/www/q2a.js
COPY  . .
RUN yarn install_packages
EXPOSE 4000

CMD [ "yarn","api_run_dev"]

docker build -t q2a .
docker run -d --name q2a-demo --network mysqlnetwork -p 4000:4000  q2a
docker rmi blueblade/q2a

docker build -t q2a-api . &&  docker run -d --name q2a-api-demo --network mysqlnetwork -p 4000:4000  q2a-api


docker build -t q2a-ui . &&  docker run -d --name q2a-ui-demo --network mysqlnetwork -p 3000:3000  q2a-ui

docker run -d \
    --name mysql \
    --network mysqlnetwork\
    -e MYSQL_ROOT_PASSWORD="nvdgflhdfhg4w5345fdkgj,mcxbnmdfgkj435" \
    -v /opt/mysql:/var/lib/mysql \
    -p 3306:3306 \
    mysql:5.7

docker run -d \
    --name phpmyadmin \
    --network mysqlnetwork\
    -e PMA_HOST=mysql \
    -p 8080:80 \
    phpmyadmin/phpmyadmin:edge


FROM mhart/alpine-node:14.16.1
RUN mkdir -p /var/www/q2a.js/node_modules
WORKDIR /var/www/q2a.js
COPY  . .
EXPOSE 4000

CMD ["yarn ap"]

docker exec -it q2aserver bash

docker run -it --entrypoint bash docker/q2a

docker network create test

